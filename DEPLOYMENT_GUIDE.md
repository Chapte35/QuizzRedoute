# üöÄ Guide de D√©ploiement - Quiz des Capitales

Ce guide vous accompagne √©tape par √©tape pour d√©ployer votre quiz sur diff√©rentes plateformes.

## üìã Pr√©requis

- Un compte GitHub
- Un compte Firebase (gratuit)
- Un navigateur web moderne
- (Optionnel) Un nom de domaine personnalis√©

## üî• Configuration Firebase D√©taill√©e

### 1. Cr√©ation du projet Firebase

1. Rendez-vous sur [Firebase Console](https://console.firebase.google.com/)
2. Cliquez sur **"Ajouter un projet"**
3. Nom du projet : `quiz-capitales-[votre-nom]`
4. D√©sactivez Google Analytics (optionnel pour ce projet)
5. Cliquez sur **"Cr√©er un projet"**

### 2. Configuration de Realtime Database

1. Dans le menu lat√©ral, s√©lectionnez **"Realtime Database"**
2. Cliquez sur **"Cr√©er une base de donn√©es"**
3. Choisissez une localisation proche :
   - **Europe** : `europe-west1`
   - **√âtats-Unis** : `us-central1`
   - **Asie** : `asia-southeast1`
4. S√©lectionnez **"Commencer en mode test"**

### 3. Configuration des r√®gles de s√©curit√©

Dans l'onglet **"R√®gles"**, remplacez le contenu par :

```json
{
  "rules": {
    "games": {
      "$gameId": {
        ".read": true,
        ".write": true,
        ".validate": "newData.hasChildren(['id', 'gameState'])",
        "players": {
          "$playerId": {
            ".validate": "newData.hasChildren(['id', 'name', 'score'])"
          }
        },
        "currentQuestion": {
          ".validate": "newData.hasChildren(['id', 'question', 'options', 'correct'])"
        }
      }
    },
    ".read": false,
    ".write": false
  }
}
```

### 4. Configuration de l'authentification (optionnel)

Si vous souhaitez ajouter l'authentification plus tard :

1. Allez dans **"Authentication"**
2. Cliquez sur **"Commencer"**
3. Dans l'onglet **"Sign-in method"**, activez :
   - **Anonyme** (pour les invit√©s)
   - **Google** (optionnel)
   - **E-mail/Mot de passe** (optionnel)

### 5. R√©cup√©ration de la configuration

1. Allez dans **"Param√®tres du projet"** (ic√¥ne ‚öôÔ∏è)
2. Scrollez jusqu'√† **"Vos applications"**
3. Cliquez sur l'ic√¥ne **Web** `</>`
4. Nom de l'app : `quiz-web`
5. Cochez **"Configurer aussi Firebase Hosting"** (optionnel)
6. Copiez la configuration qui appara√Æt

## üåê D√©ploiement sur GitHub Pages

### 1. Pr√©paration des fichiers

Cr√©ez la structure suivante :

```
quiz-capitales/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ questions.json
‚îú‚îÄ‚îÄ questions-extended.json (optionnel)
‚îú‚îÄ‚îÄ game-config.json (optionnel)
‚îú‚îÄ‚îÄ firebase-config.js (optionnel)
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ DEPLOYMENT-GUIDE.md
‚îî‚îÄ‚îÄ assets/ (optionnel)
    ‚îú‚îÄ‚îÄ sounds/
    ‚îú‚îÄ‚îÄ images/
    ‚îî‚îÄ‚îÄ icons/
```

### 2. Configuration Firebase dans index.html

Remplacez la section de configuration Firebase dans `index.html` :

```javascript
const firebaseConfig = {
  apiKey: "VOTRE_API_KEY",
  authDomain: "VOTRE_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://VOTRE_PROJECT_ID-default-rtdb.REGION.firebasedatabase.app/",
  projectId: "VOTRE_PROJECT_ID",
  storageBucket: "VOTRE_PROJECT_ID.appspot.com",
  messagingSenderId: "VOTRE_MESSAGING_SENDER_ID",
  appId: "VOTRE_APP_ID"
};
```

### 3. Cr√©ation du repository GitHub

1. Connectez-vous √† [GitHub](https://github.com)
2. Cliquez sur **"New repository"**
3. Nom : `quiz-capitales`
4. Description : `Quiz multijoueur des capitales avec Firebase`
5. Public ‚úÖ
6. Ajoutez un README ‚úÖ
7. Cliquez sur **"Create repository"**

### 4. Upload des fichiers

**Option A : Interface web GitHub**
1. Cliquez sur **"uploading an existing file"**
2. Glissez-d√©posez tous vos fichiers
3. Commit message : `Initial quiz setup`
4. Cliquez sur **"Commit changes"**

**Option B : Git en ligne de commande**
```bash
git clone https://github.com/VOTRE_USERNAME/quiz-capitales.git
cd quiz-capitales
# Copiez vos fichiers dans ce dossier
git add .
git commit -m "Initial quiz setup"
git push origin main
```

### 5. Activation de GitHub Pages

1. Allez dans **Settings** de votre repository
2. Scrollez jusqu'√† **"Pages"**
3. Source : **"Deploy from a branch"**
4. Branch : **"main"** ou **"master"**
5. Folder : **"/ (root)"**
6. Cliquez sur **"Save"**

### 6. Test du d√©ploiement

Votre quiz sera accessible √† :
```
https://VOTRE_USERNAME.github.io/quiz-capitales/
```

## üéØ Domaine personnalis√© (optionnel)

### 1. Configuration DNS

Si vous avez un domaine (ex: `quiz.monsite.com`) :

1. Chez votre fournisseur DNS, cr√©ez un enregistrement CNAME :
   ```
   quiz.monsite.com ‚Üí VOTRE_USERNAME.github.io
   ```

### 2. Configuration GitHub

1. Dans **Settings ‚Üí Pages**
2. **Custom domain** : `quiz.monsite.com`
3. Cochez **"Enforce HTTPS"**
4. Attendez la v√©rification (quelques minutes)

## üîß D√©ploiement sur Firebase Hosting

### 1. Installation de Firebase CLI

```bash
npm install -g firebase-tools
```

### 2. Connexion √† Firebase

```bash
firebase login
```

### 3. Initialisation du projet

```bash
firebase init hosting
```

R√©pondez aux questions :
- **Project** : S√©lectionnez votre projet
- **Public directory** : `.` (r√©pertoire actuel)
- **Single-page app** : `Yes`
- **GitHub automatic builds** : `Yes` (optionnel)

### 4. D√©ploiement

```bash
firebase deploy
```

Votre quiz sera accessible √† :
```
https://VOTRE_PROJECT_ID.web.app/
```

## üõ†Ô∏è Personnalisation avanc√©e

### 1. Modification des th√®mes

√âditez `game-config.json` pour ajouter de nouveaux th√®mes :

```json
{
  "themes": {
    "votre_theme": {
      "name": "Mon Th√®me",
      "colors": {
        "primary": "#votre_couleur",
        "secondary": "#votre_couleur"
      },
      "background": "linear-gradient(...)"
    }
  }
}
```

### 2. Ajout de nouvelles questions

Modifiez `questions.json` ou cr√©ez de nouveaux fichiers :

```json
{
  "questions": [
    {
      "id": 51,
      "question": "Nouvelle question ?",
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "category": "Nouvelle cat√©gorie",
      "difficulty": "moyen"
    }
  ]
}
```

### 3. Sons et effets

Ajoutez des fichiers audio dans le dossier `assets/sounds/` :

```
assets/sounds/
‚îú‚îÄ‚îÄ correct.mp3
‚îú‚îÄ‚îÄ wrong.mp3
‚îú‚îÄ‚îÄ question.mp3
‚îú‚îÄ‚îÄ start.mp3
‚îî‚îÄ‚îÄ end.mp3
```

### 4. Favicon et m√©tadonn√©es

Ajoutez dans `<head>` de `index.html` :

```html
<link rel="icon" type="image/png" href="assets/icons/favicon.png">
<meta name="description" content="Quiz multijoueur des capitales">
<meta property="og:title" content="Quiz des Capitales">
<meta property="og:description" content="Testez vos connaissances g√©ographiques">
<meta property="og:image" content="assets/images/preview.jpg">
```

## üìä Analytics et monitoring

### 1. Google Analytics (optionnel)

Ajoutez dans `<head>` :

```html
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
</script>
```

### 2. Firebase Analytics

Dans votre configuration Firebase :

```javascript
// Initialize Analytics
const analytics = firebase.analytics();

// Track events
analytics.logEvent('game_created');
analytics.logEvent('player_joined');
analytics.logEvent('question_answered', {
  question_id: questionId,
  is_correct: isCorrect
});
```

## üîí S√©curit√© en production

### 1. R√®gles Firebase strictes

```json
{
  "rules": {
    "games": {
      "$gameId": {
        ".read": "auth != null || data.child('settings/public').val() == true",
        ".write": "auth != null",
        ".validate": "newData.hasChildren(['id', 'gameState'])",
        "players": {
          "$playerId": {
            ".write": "auth.uid == $playerId || root.child('games').child($gameId).child('host').val() == auth.uid"
          }
        }
      }
    }
  }
}
```

### 2. Limitations de d√©bit

Configurez des quotas dans Firebase Console :
- **Lectures simultan√©es** : 100,000
- **√âcritures simultan√©es** : 10,000
- **Connexions simultan√©es** : 100,000

### 3. HTTPS et s√©curit√©

- Activez **"Enforce HTTPS"** sur GitHub Pages
- Configurez les **Content Security Policy headers**
- Utilisez **Firebase App Check** pour la protection

## üêõ D√©bogage et monitoring

### 1. Console du navigateur

Activez les logs d√©taill√©s :

```javascript
// Dans firebase-config.js
firebase.database.enableLogging(true);
```

### 2. Firebase Debugging

```javascript
// Monitoring des connexions
database.ref('.info/connected').on('value', (snapshot) => {
  if (snapshot.val() === true) {
    console.log('Connected to Firebase');
  } else {
    console.log('Disconnected from Firebase');
  }
});
```

### 3. Error Reporting

```javascript
// Capture des erreurs
window.addEventListener('error', (error) => {
  console.error('Application error:', error);
  // Envoyer √† un service de monitoring
});
```

## üì± Progressive Web App (PWA)

### 1. Manifest.json

Cr√©ez `manifest.json` :

```json
{
  "name": "Quiz des Capitales",
  "short_name": "QuizCap",
  "description": "Quiz multijoueur des capitales",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#667eea",
  "theme_color": "#667eea",
  "icons": [
    {
      "src": "assets/icons/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    }
  ]
}
```

### 2. Service Worker

Cr√©ez `sw.js` :

```javascript
const CACHE_NAME = 'quiz-v1';
const urlsToCache = [
  '/',
  '/index.html',
  '/questions.json',
  '/manifest.json'
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => cache.addAll(urlsToCache))
  );
});
```

## üöÄ Optimisations de performance

### 1. Compression des images

- Utilisez WebP pour les images
- Optimisez les PNG avec TinyPNG
- Redimensionnez aux tailles n√©cessaires

### 2. Minification

- Minifiez le CSS et JavaScript
- Compressez les fichiers JSON
- Utilisez la compression gzip

### 3. CDN et caching

- Utilisez les CDN Firebase
- Configurez les headers de cache
- Impl√©mentez le lazy loading

## üìà Scaling et performance

### 1. Firebase quotas

- **Realtime Database** : 100,000 connexions simultan√©es
- **Hosting** : 1GB stockage, 10GB transfert/mois
- **Functions** : 2M invocations/mois (si utilis√©es)

### 2. Optimisations base de donn√©es

```javascript
// Utilisez des index pour les requ√™tes
database.ref('games').orderByChild('createdAt').limitToLast(10);

// D√©connectez les listeners inactifs
const listener = database.ref('games/ABC123').on('value', callback);
database.ref('games/ABC123').off('value', listener);
```

---

## üéâ Pr√™t √† jouer !

Votre quiz est maintenant d√©ploy√© et pr√™t √† accueillir des joueurs du monde entier !

### URLs utiles

- **Repository GitHub** : `https://github.com/VOTRE_USERNAME/quiz-capitales`
- **Site en ligne** : `https://VOTRE_USERNAME.github.io/quiz-capitales/`
- **Console Firebase** : `https://console.firebase.google.com/project/VOTRE_PROJECT_ID`
- **Documentation** : [Firebase Docs](https://firebase.google.com/docs)

### Support

- üìß Issues GitHub pour les bugs
- üí¨ Discussions pour les suggestions
- üìñ Wiki pour la documentation √©tendue